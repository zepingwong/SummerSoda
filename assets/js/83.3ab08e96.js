(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{822:function(s,t,a){"use strict";a.r(t);var n=a(17),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("背景")])])]),s._v(" "),a("ul",[a("li",[a("p",[a("em",[a("strong",[s._v("内网计算机")])]),s._v("：Windows 10 x64")])]),s._v(" "),a("li",[a("p",[a("em",[a("strong",[s._v("FRP服务器")])]),s._v("：腾讯云 Ubuntu 20.04")])])]),s._v(" "),a("p",[s._v("本文重点介绍 "),a("code",[s._v("FRP")]),s._v(" 服务器端和客户端配置，远程桌面连接属于常规内容，不再详细说明。")]),s._v(" "),a("h2",{attrs:{id:"准备工作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备工作"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("准备工作")])])]),s._v(" "),a("h3",{attrs:{id:"下载软件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载软件"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("下载软件")])])]),s._v(" "),a("p",[s._v("GitHub下载 "),a("a",{attrs:{href:"https://github.com/fatedier/frp/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("FRP release"),a("OutboundLink")],1),s._v(" 的程序")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2022/05/28/kgIf5A9LWvbKXMm.png",alt:"Snipaste_2022-05-28_15-21-26.png"}})]),s._v(" "),a("p",[s._v("因为本次需要配置 Ubuntu 和 Windows 两个环境，所以两个包都下载下来（Linux 的包可以到终端上去操作，但是云服务器没有代理，所以一并在本地电脑上解决了）")]),s._v(" "),a("h2",{attrs:{id:"服务器配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务器配置"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("服务器配置")])])]),s._v(" "),a("p",[s._v("打开 "),a("code",[s._v("frp_linux_amd64.tar.gz")]),s._v(" ，里面有客户端（client）和服务端（server）的可执行文件和配置文件，其中"),a("code",[s._v("frps")]),s._v(" 、"),a("code",[s._v("frps_full.ini")]),s._v(" 、 "),a("code",[s._v("frps.ini")]),s._v(" 是服务器端的可执行文件和配置文件。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2022/05/28/nSZmgJ2d7TjQGMs.png",alt:"Snipaste_2022-05-28_15-26-22.png"}})]),s._v(" "),a("h3",{attrs:{id:"修改配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改配置文件"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("修改配置文件")])])]),s._v(" "),a("p",[s._v("修改 "),a("code",[s._v("frps.ini")]),s._v(" 文件")]),s._v(" "),a("div",{staticClass:"language-ini line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token section"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("common")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("bind_addr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("0.0.0.0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("bind_port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("7000")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# token=1234567890")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("dashboard_port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("7500")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("dashboard_user")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("username")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("dashboard_pwd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("password")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[a("em",[a("strong",[s._v("说明")])])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("bind_addr")]),s._v(" 服务器本地 IP")]),s._v(" "),a("li",[a("code",[s._v("bind_port")]),s._v(" "),a("code",[s._v("FRP")]),s._v(" 监听端口")]),s._v(" "),a("li",[a("code",[s._v("token")]),s._v(" 验证 token 根据需要设置")]),s._v(" "),a("li",[a("code",[s._v("dashboard_port")]),s._v(" "),a("code",[s._v("FRP")]),s._v("面板端口")]),s._v(" "),a("li",[a("code",[s._v("dashboard_user")]),s._v("、"),a("code",[s._v("dashboard_pwd")]),s._v(" 是面板的账号密码")])]),s._v(" "),a("blockquote",[a("ol",[a("li",[s._v("除了"),a("code",[s._v("bind_addr")]),s._v("参数之外的其他参数，都可以根据需求自行修改。")]),s._v(" "),a("li",[a("code",[s._v("token")]),s._v("和面板的配置都是非必须的。")]),s._v(" "),a("li",[s._v("如果使用云服务器，那么"),a("code",[s._v("bind_port")]),s._v(" 和 "),a("code",[s._v("dashboard_port")]),s._v("都需要在云服务器安全组放行。")])])]),s._v(" "),a("h3",{attrs:{id:"修改权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改权限"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("修改权限")])])]),s._v(" "),a("p",[s._v("然后给服务器端 "),a("code",[s._v("frps")]),s._v(" 赋予执行权限：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("755")]),s._v(" ./frps\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"运行-frps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行-frps"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("运行 frps")])])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("./frps -c ./frps.ini\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("出现"),a("code",[s._v("[root.go:209] frps started successfully")]),s._v(" 即代表运行成功。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2022/05/28/wgMQcO43yqisKtY.png",alt:"Snipaste_2022-05-28_15-46-51.png"}})]),s._v(" "),a("blockquote",[a("p",[s._v("如果运行出现错误 "),a("code",[s._v("bash: ./frps: Permission denied")]),s._v(" 表示还是权限错误，参考上一步修改权限")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2022/05/28/bLCqN3jImsK2eAx.png",alt:"Snipaste_2022-05-28_15-44-39.png"}})])]),s._v(" "),a("h3",{attrs:{id:"访问面板"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#访问面板"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("访问面板")])])]),s._v(" "),a("p",[a("code",[s._v("frps")]),s._v(" 运行成功后可以通过 "),a("code",[s._v("http://公网IP:面板端口")]),s._v(" 访问 frp 面板（前提是配置了访问面板）。登录面板可以看到如下界面：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2022/05/28/muBf7zy5kUaAdEb.png",alt:"Snipaste_2022-05-28_15-52-29.png"}})]),s._v(" "),a("h3",{attrs:{id:"进阶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进阶"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("进阶")])])]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v("nohup")]),s._v(" 让 "),a("code",[s._v("frps")]),s._v(" 后台运行")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" ./frps -c ./frps.ini "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" nohup.out "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("查看后台服务，通过这个指令就能看到 "),a("code",[s._v("frps")]),s._v(" 的 PID")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -aux "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./frps -c ./frps.ini"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"客户端配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#客户端配置"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("客户端配置")])])]),s._v(" "),a("p",[s._v("打开 "),a("code",[s._v("frp_windows_amd64.zip")]),s._v(" ，里面有客户端（client）和服务端（server）的可执行文件和配置文件，其中"),a("code",[s._v("frpc.exe")]),s._v(" 、"),a("code",[s._v("frpc_full.ini")]),s._v(" 、 "),a("code",[s._v("frpc.ini")]),s._v(" 是客户端的可执行文件和配置文件。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2022/05/28/Mtz8K2k1v3EWijg.png",alt:"Snipaste_2022-05-28_16-00-04.png"}})]),s._v(" "),a("h3",{attrs:{id:"修改配置文件-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改配置文件-2"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("修改配置文件")])])]),s._v(" "),a("p",[s._v("本地演示用到程序是 windows 远程桌面，使用 3389 端口。需要用 "),a("code",[s._v("FRP")]),s._v(" 将 windows 客户端的 3389 转发到服务器端上。比如将客户端的 3389 转发到服务器端的远程端口。用文本编辑器打开 "),a("code",[s._v("frpc.ini")]),s._v(" 文件:")]),s._v(" "),a("div",{staticClass:"language-ini line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token section"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("common")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("server_addr")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("FRP服务器公网地址")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("server_port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("7000")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# token=1234567890")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token section"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("RDP")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("type")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("tcp")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("local_ip")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("127.0.0.1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("local_port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("3389")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("remote_port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("服务器端远程端口")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[a("em",[a("strong",[s._v("说明")])])]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("server_addr")]),s._v(" FRP服务器公网地址")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("server_port")]),s._v(" 服务器FRP服务端口需要与服务器配置一致")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("token")]),s._v(" token 验证，如果服务器端配置了 "),a("code",[s._v("token")]),s._v("，客户端需要与服务器一致")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("type")]),s._v(" 转发端口协议类型")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("local_ip")]),s._v(" 本地地址，一般为 "),a("code",[s._v("127.0.0.1")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("local_port")]),s._v(" 本地服务端口，不同程序端口不同")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("remote_port")]),s._v(" 转发到服务器的某个端口")])])]),s._v(" "),a("blockquote",[a("p",[s._v("如果FRP服务使用的云服务器，要想通过公网IP加远程端口访问到转发的服务，需要云服务器安全组将此处配置的 "),a("code",[s._v("remote_port")]),s._v(" 放行。")])]),s._v(" "),a("h3",{attrs:{id:"运行-frpc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行-frpc"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("运行 frpc")])])]),s._v(" "),a("p",[s._v("打开CMD 在 "),a("code",[s._v("frpc")]),s._v(" 所在目录下运行")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("frpc.exe -c frpc.ini\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("出现 "),a("code",[s._v("success")]),s._v(" 就是连接成功")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2022/05/28/rGeuF7lNITJKtOD.png",alt:"Snipaste_2022-05-28_16-15-14.png"}})]),s._v(" "),a("p",[a("em",[a("strong",[s._v("说明")])])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("[RDP]的服务代理启动成功")])]),s._v(" "),a("li",[a("p",[s._v("[ssh]启动失败: 端口已经被占用")]),s._v(" "),a("p",[s._v("因为我除了添加了[RDP]的服务，我还添加了一个[ssh]的服务，服务器端口使用的是 6000")]),s._v(" "),a("div",{staticClass:"language-ini line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token section"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("ssh")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("type")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("tcp")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("local_ip")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("127.0.0.1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("local_port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("22")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("remote_port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("6000")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("但是因为服务器 6000 这个端口已经被其他服务占用了，所以就启动失败")])])]),s._v(" "),a("h3",{attrs:{id:"服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务器"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("服务器")])])]),s._v(" "),a("p",[s._v("客户端的操作，在服务器端也能看到记录")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2022/05/28/JYcVqw1EZCed5N6.png",alt:"Snipaste_2022-05-28_16-27-04.png"}})]),s._v(" "),a("p",[s._v("面板中也会出现相应的记录")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2022/05/28/DvESRA87lPxmzMo.png",alt:"Snipaste_2022-05-28_16-29-06.png"}})]),s._v(" "),a("h3",{attrs:{id:"进阶-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进阶-2"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("进阶")])])]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v("winsw")]),s._v(" 注册 windows 后台服务")]),s._v(" "),a("h4",{attrs:{id:"下载-winsw"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载-winsw"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("下载 winsw")])])]),s._v(" "),a("p",[s._v("GitHub下载 "),a("a",{attrs:{href:"https://github.com/winsw/winsw/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("winsw.exe"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2022/05/28/48y6NQSgjvCpoOM.png",alt:"Snipaste_2022-05-28_16-37-41.png"}})]),s._v(" "),a("h4",{attrs:{id:"重命名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重命名"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("重命名")])])]),s._v(" "),a("p",[s._v("将软件重命名为 "),a("code",[s._v("winsw.exe")]),s._v("，并将该软件放到 "),a("code",[s._v("frpc")]),s._v(" 客户端所在目录下备用。")]),s._v(" "),a("h4",{attrs:{id:"创建配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建配置文件"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("创建配置文件")])])]),s._v(" "),a("p",[s._v("还是在 "),a("code",[s._v("frpc")]),s._v(" 客户端所在目录下创建 "),a("code",[s._v("winsw.xml")]),s._v(" 文件，并写入一下内容并保存：")]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("service")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("frpc"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("frpc"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("description")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("frpc"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("description")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("executable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("frpc"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("executable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("arguments")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("-c frpc.ini"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("arguments")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("onfailure")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("action")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("restart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("delay")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("60 sec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("onfailure")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("action")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("restart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("delay")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("120 sec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("logmode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("reset"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("logmode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("service")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h4",{attrs:{id:"启动-winsw"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动-winsw"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("启动 winsw")])])]),s._v(" "),a("p",[s._v("管理员权限启动 CMD，进入到 "),a("code",[s._v("frpc")]),s._v(" 客户端所在目录下，添加服务")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("winsw.exe "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("启动服务")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("winsw start\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"其他"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("其他")])])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#添加服务")]),s._v("\nwinsw.exe "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开始")]),s._v("\nwinsw start\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#关闭")]),s._v("\nwinsw stop\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#卸载服务")]),s._v("\nwinsw uninstall\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h2",{attrs:{id:"远程访问"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#远程访问"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("远程访问")])])]),s._v(" "),a("p",[s._v("内网计算机配置允许远程访问，然后其他任何计算机通过 Windows 自带的远程桌面工具通过访问 "),a("code",[s._v("公网IP:远程桌面转发端口")]),s._v(" 连接远程桌面。")])])}),[],!1,null,null,null);t.default=e.exports}}]);