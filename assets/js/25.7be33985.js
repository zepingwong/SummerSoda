(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{841:function(s,t,a){"use strict";a.r(t);var e=a(17),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("背景")])])]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("Django版本")]),s._v(": Django3.3")])]),s._v(" "),a("p",[s._v("在进行数据库迁移 "),a("code",[s._v("python manage.py migrate")]),s._v(" 操作时报错：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("django.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module.Did you "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mysqlclient?\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"问题解决"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题解决"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("问题解决")])])]),s._v(" "),a("h3",{attrs:{id:"原因"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原因"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("原因")])])]),s._v(" "),a("p",[a("code",[s._v("Django2.2")]),s._v(" 之前版本: 没有安装 "),a("code",[s._v("pymysql")]),s._v(" 模块，或没有配置 "),a("code",[s._v("__init__.py")]),s._v(" 文件\n"),a("code",[s._v("Django2.2")]),s._v(" 之后版本: 没有安装 "),a("code",[s._v("mysqlclient")]),s._v(" 模块")]),s._v(" "),a("h3",{attrs:{id:"django2-2-之前版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#django2-2-之前版本"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("Django2.2 之前版本")])])]),s._v(" "),a("h4",{attrs:{id:"step-1-检查依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-1-检查依赖"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("Step 1. 检查依赖")])])]),s._v(" "),a("p",[s._v("使用下面的指令查看虚拟环境中是否安装了 "),a("code",[s._v("pymysql")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("pip list\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如，未安装，则使用 "),a("code",[s._v("pip")]),s._v(" 指令安装模块")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("pip "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" pymysql\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"step-2-修改-init-py"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-2-修改-init-py"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("Step 2. 修改__init__.py")])])]),s._v(" "),a("p",[s._v("在项目同名的模块下的 "),a("code",[s._v("__init__.py")]),s._v(" 文件中加入以下代码")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" pymysql\npymysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("install_as_MySQLdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"step-3-若此时还是报错"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-3-若此时还是报错"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("Step 3. 若此时还是报错")])])]),s._v(" "),a("p",[s._v("如果出现类类似的错误")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysqlclient 1.4.0 or newer is required; you have 0.10.1.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("接下来在和项目目录同名模块的 "),a("code",[s._v("__init__.py")]),s._v(" 中加入")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v("  pymysql\npymysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version_info "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"final"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定版本")]),s._v("\npymysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("install_as_MySQLdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"django2-2-之后版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#django2-2-之后版本"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("Django2.2 之后版本")])])]),s._v(" "),a("h4",{attrs:{id:"step-1-安装依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-1-安装依赖"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("Step 1. 安装依赖")])])]),s._v(" "),a("p",[s._v("安装 "),a("a",{attrs:{href:"https://www.lfd.uci.edu/~gohlke/pythonlibs/#mysqlclient",target:"_blank",rel:"noopener noreferrer"}},[s._v("mysqlclient"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("pip "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mysqlclient\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"step-2-已安装情况下仍然报错"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-2-已安装情况下仍然报错"}},[s._v("#")]),s._v(" "),a("em",[a("strong",[s._v("Step 2. 已安装情况下仍然报错")])])]),s._v(" "),a("p",[s._v("在和项目目录同名模块的 "),a("code",[s._v("__init__.py")]),s._v(" 中加入")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" pymysql\npymysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("install_as_MySQLdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("或强制重装依赖")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("pip "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mysqlclient --force-reinstall\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);