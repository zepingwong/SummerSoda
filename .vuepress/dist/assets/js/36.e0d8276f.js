(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{584:function(t,a,s){"use strict";s.r(a);var e=s(2),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"序列化与反序列化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#序列化与反序列化"}},[t._v("#")]),t._v(" "),a("em",[a("strong",[t._v("序列化与反序列化")])])]),t._v(" "),a("h3",{attrs:{id:"_1-序列化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-序列化"}},[t._v("#")]),t._v(" "),a("em",[a("strong",[t._v("1.序列化")])])]),t._v(" "),a("p",[a("strong",[t._v("概念")]),t._v("：将程序中的一个数据结构类型转化为其它格式（字典、json、XML等）。例如：将 "),a("code",[t._v("django")]),t._v(" 中的模型类对象转换为json字符串，这个转换过程称之为序列化\n"),a("strong",[t._v("序列化时机")]),t._v("：当需要给前端响应模型数据时，需要将模型数据序列化成前端需要的格式")]),t._v(" "),a("h3",{attrs:{id:"_2-反序列化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-反序列化"}},[t._v("#")]),t._v(" "),a("em",[a("strong",[t._v("2.反序列化")])])]),t._v(" "),a("p",[a("strong",[t._v("概念")]),t._v("：将其它格式 （字典、json、XML等）转换为程序中的数据，例如：将json字符串转换为 "),a("code",[t._v("django")]),t._v(" 中的模型类对象，这个过程称之为反序列化\n"),a("strong",[t._v("反序列化时机")]),t._v("：当需要将用户发送的数据存储到数据库之前，需要使用反序列化")]),t._v(" "),a("h3",{attrs:{id:"_3-开发restful接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-开发restful接口"}},[t._v("#")]),t._v(" "),a("em",[a("strong",[t._v("3.开发Restful接口")])])]),t._v(" "),a("p",[t._v("视图中做的最主要的三件事：")]),t._v(" "),a("ul",[a("li",[t._v("将请求的数据（如：Json格式）转换为模型类对象（反序列化)")]),t._v(" "),a("li",[t._v("操作数据库")]),t._v(" "),a("li",[t._v("将模型类对象转换为响应的数据（如：Json格式）（序列化）")])]),t._v(" "),a("p",[t._v("在视图中需要做的最核心的事：")]),t._v(" "),a("ul",[a("li",[t._v("将数据库数据序列化为前端所需要的格式，并返回")]),t._v(" "),a("li",[t._v("将前端发送的数据反序列化为模型类对象，并保存到数据库中")])]),t._v(" "),a("h2",{attrs:{id:"常用序列化器类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用序列化器类"}},[t._v("#")]),t._v(" "),a("em",[a("strong",[t._v("常用序列化器类")])])]),t._v(" "),a("h3",{attrs:{id:"_1-serializers-serializer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-serializers-serializer"}},[t._v("#")]),t._v(" "),a("em",[a("strong",[t._v("1.serializers.Serializer")])])]),t._v(" "),a("p",[t._v("应用下先创建一个名为 "),a("code",[t._v("serializers.py")]),t._v(" 的模块，在该模块下需要引入 "),a("code",[t._v("serializers")]),t._v(" 模块，并创建序列化器类 "),a("code",[t._v("ProjectsSerializer")]),t._v(" 继承 "),a("code",[t._v("serializers.Serializer")]),t._v(" 父类")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" rest_framework "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" serializers\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProjectSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("serializers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Serializer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" serializers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max_length"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" label"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"项目名称"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" help_text"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'项目名称'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    leader "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" serializers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max_length"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" label"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"项目负责人"')]),t._v("， help_text"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'项目负责人'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    programmer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" serializers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max_length"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" label"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"开发人员"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" help_text"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"开发人员"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    tester "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" serializers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max_length"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" label"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"测试人员"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" help_text"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"测试人员"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h4",{attrs:{id:"字段说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字段说明"}},[t._v("#")]),t._v(" "),a("em",[a("strong",[t._v("字段说明")])])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("max_length")]),t._v("：最大长度：在反序列化时进行输入最大长度校验")]),t._v(" "),a("li",[a("code",[t._v("min_length")]),t._v(" ：最小长度：在反序列化时进行输入最小长度校验")]),t._v(" "),a("li",[a("code",[t._v("allow_blank")]),t._v("：是否允许为空：在反序列化时允许传空白字符串，默认不允许")]),t._v(" "),a("li",[a("code",[t._v("max_value")]),t._v("：最大值：在反序列化时进行输入最大值校验")]),t._v(" "),a("li",[a("code",[t._v("min_value")]),t._v("：最小值：在反序列化时进行输入最小值校验")]),t._v(" "),a("li",[a("code",[t._v("read_only")]),t._v("：表明该字段仅用于序列化输出，但在反序列化验证时不做校验，默认 "),a("code",[t._v("False")])]),t._v(" "),a("li",[a("code",[t._v("write_only")]),t._v("：表明该字段仅用于反序列化输入，但在序列化时不进行输出，默认 "),a("code",[t._v("False")])]),t._v(" "),a("li",[a("code",[t._v("required")]),t._v("：表明该字段在反序列化时必须输入，序列化时必须输出，默认 "),a("code",[t._v("True")])]),t._v(" "),a("li",[a("code",[t._v("default")]),t._v("：反序列化时使用的默认值，如果不指明，在传递时默认值为 "),a("code",[t._v("0")])]),t._v(" "),a("li",[a("code",[t._v("allow_null")]),t._v("：表明该字段是否允许传入 "),a("code",[t._v("None")]),t._v("，默认 "),a("code",[t._v("False")])]),t._v(" "),a("li",[a("code",[t._v("validators")]),t._v(" ：该字段使用的验证器")]),t._v(" "),a("li",[a("code",[t._v("error_messages")]),t._v("：包含错误编号与错误信息的字典")]),t._v(" "),a("li",[a("code",[t._v("label")]),t._v("：用于HTML展示API页面时，显示的字段名称，相当于模型类字段的 "),a("code",[t._v("verbose_name")]),t._v(" 属性")]),t._v(" "),a("li",[a("code",[t._v("help_text")]),t._v("：用于HTML展示API页面时，显示的字段帮助提示信息")])]),t._v(" "),a("h4",{attrs:{id:"序列化模型类对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#序列化模型类对象"}},[t._v("#")]),t._v(" "),a("em",[a("strong",[t._v("序列化模型类对象")])])]),t._v(" "),a("p",[t._v("在视图类模块下，返回的为模型类对象时，使用步骤如下：")]),t._v(" "),a("ul",[a("li",[t._v("实例化一个序列化器类，将模型类对象传给 "),a("code",[t._v("instance")]),t._v(" 变量，并返回一个序列化器类对象")]),t._v(" "),a("li",[t._v("调用序列化器类对象的 "),a("code",[t._v("data")]),t._v(" 属性后传入 "),a("code",[t._v("JsonResponse")]),t._v(" 并 "),a("code",[t._v("return")])])]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Projects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id__exact"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("pk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nserializer_obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ProjectSerializer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("instance"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" JsonResponse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("serializer_obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h4",{attrs:{id:"序列化查询集"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#序列化查询集"}},[t._v("#")]),t._v(" "),a("em",[a("strong",[t._v("序列化查询集")])])]),t._v(" "),a("p",[t._v("在视图类模块下，返回的为查询集时，使用步骤如下：")]),t._v(" "),a("ul",[a("li",[t._v("实例化一个序列化器类，将模型类对象传给 "),a("code",[t._v("instance")]),t._v(" 变量，并且设置 "),a("code",[t._v("many=True")]),t._v("，并返回一个序列化器类对象")]),t._v(" "),a("li",[t._v("调用序列化器类对象的 "),a("code",[t._v("data")]),t._v(" 属性后传入 "),a("code",[t._v("JsonResponse")]),t._v(" ，设置 "),a("code",[t._v("safe=False")]),t._v(" ，并 "),a("code",[t._v("return")])])]),t._v(" "),a("h4",{attrs:{id:"自定义create和update方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义create和update方法"}},[t._v("#")]),t._v(" "),a("em",[a("strong",[t._v("自定义create和update方法")])])]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" validated_data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# validated_data参数为校验通过之后的数据")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 必须将创建成功的模型类对象返回")]),t._v("\n    obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Projects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v("validated_data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" obj\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" instance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" validated_data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# instance为待更新的模型类对象")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# validated_data参数为校验通过之后的数据")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 必须将更新成功的模型类对象返回")]),t._v("\n    instance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" validated_data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("or")]),t._v(" instance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name\n    instance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("leader "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" validated_data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'leader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("or")]),t._v(" instance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("leader\n    instance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tester "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" validated_data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tester'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("or")]),t._v(" instance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tester\n    instance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("programmer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" validated_data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'programmer'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("or")]),t._v(" instance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("programmer\n    instance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("desc "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" validated_data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'desc'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("or")]),t._v(" instance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("desc\n    instance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("save"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" instance\n")])])]),a("h3",{attrs:{id:"_2-serializers-modelserializer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-serializers-modelserializer"}},[t._v("#")]),t._v(" "),a("em",[a("strong",[t._v("2.serializers.ModelSerializer")])])]),t._v(" "),a("p",[t._v("应用下先创建一个名为 "),a("code",[t._v("serializers.py")]),t._v(" 的模块，在该模块下需要引入 "),a("code",[t._v("serializers")]),t._v(" 模块，并创建序列化器类 "),a("code",[t._v("ProjectsModelSerializer")]),t._v(" 继承 "),a("code",[t._v("serializers.ModelSerializer")]),t._v(" 父类")]),t._v(" "),a("h4",{attrs:{id:"特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#特性"}},[t._v("#")]),t._v(" "),a("em",[a("strong",[t._v("特性")])])]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("filed")]),t._v(" 字段可以不需要自己写，与模型一一对应")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("ModelSerializer")]),t._v(" 中定义了与本来需要序列化字段同名的字段，会覆盖原来的模型类映射的字段")])]),t._v(" "),a("li",[a("p",[t._v("简单的实现了 "),a("code",[t._v("create")]),t._v(" 和 "),a("code",[t._v("update")]),t._v(" 方法，可根据需求重写。调用父类的 "),a("code",[t._v("creat")]),t._v(" 和 "),a("code",[t._v("update")]),t._v(" 方法时，"),a("code",[t._v("validated_data")]),t._v(" 不需要解包")]),t._v(" "),a("div",{staticClass:"language-py extra-class"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# update")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("update"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("instance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" validated_data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# create")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("validated_data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])]),t._v(" "),a("h4",{attrs:{id:"自定义meta参数属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义meta参数属性"}},[t._v("#")]),t._v(" "),a("em",[a("strong",[t._v("自定义Meta参数属性")])])]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("mode")]),t._v("关联的模型类")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("fields")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("使用 "),a("code",[t._v("fields")]),t._v(" 来明确字段, 可以写明具体哪些字段")]),t._v(" "),a("li",[t._v("也可以写  "),a("code",[t._v("__all__")]),t._v("，所有字段都生成序列化规则")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("exclude")]),t._v("：可以明确排除掉哪些字段")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("read_only_fields")]),t._v("：指明只读字段,即仅用于序列化输出的字段")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("extra_kwargs")]),t._v("：为 "),a("code",[t._v("ModelSerializer")]),t._v(" 添加或修改原有的选项参数，来定制某些字段（嵌套字典）")])])]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" rest_framework "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" serializers\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" App"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("models "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Projects\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProjectModelSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("serializers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ModelSerializer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    email "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" serializers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EmailField"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("write_only"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Meta")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 需要在Meta内部类这两个指定model类属性：需要按照哪一个模型类来创建")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# fields类属性来指定模型类中哪些字段需要输入或输出")]),t._v("\n        model "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Projects\n        fields "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'__all__'")]),t._v("\n        exclude "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'desc'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'create_time'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        extra_kwargs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'programmer'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'label'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'研发人员'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'write_only'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);